<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>commands</key>
    <string>vlc,mediastreamsegmenter</string>
    <key>arguments</key>
    <dict>
        <key>vlc</key>
        <array>
            <string>###vlc###</string>
            <string>###input###</string>
            <string>--no-sout-transcode-hurry-up</string>
            <string>--no-ffmpeg-hurry-up</string>
            <string>--no-drop-late-frames</string>
            <string>--no-skip-frames</string>
            <string>--sout-transcode-high-priority</string>
            <string>--sout-transcode-audio-sync</string>
            <string>--sout-mp4-faststart</string>
            <string>--sout=#transcode{vcodec=h264,vb=###video_bitrate###,venc=x264{aud,profile=baseline,level=30,keyint=30,bframes=0,ref=1,nocabac},fps=24,scale=1,deinterlace=0,vfilter=canvas{width=###video_width###,height=###video_height###},acodec=mp4a,ab=###audio_bitrate###,channels=###audio_channels###,samplerate=###audio_samplerate###,afilter=ugly_resampler}:standard{access=file,mux=ts,dst='-'}</string>
        </array>
        <key>mediastreamsegmenter</key>
        <array>
            <string>###mediastreamsegmenter###</string>
            <string>-b</string>
            <string>###base_url######base_path###/</string>
            <string>-t</string>
            <string>###segment_duration###</string>
            <string>-f</string>
            <string>###base_path###</string>
            <string>-i</string>
            <string>###output###</string>
            <string>-B</string>
            <string>chunk-</string>
            <string>-s</string>
            <string>9999</string>
            <string>-S</string>
            <string>1</string>
            <string>--optimize</string>
        </array>
    </dict>
    <key>options</key>
    <dict>
        <key>video_bitrate</key>
        <string>integer</string>
        <key>video_width</key>
        <string>integer</string>
        <key>video_height</key>
        <string>integer</string>
        <key>audio_bitrate</key>
        <string>integer</string>
        <key>audio_channels</key>
        <string>integer</string>
        <key>audio_samplerate</key>
        <string>integer</string>
        <key>base_url</key>
        <string>string</string>
        <key>base_path</key>
        <string>string</string>
        <key>segment_duration</key>
        <string>integer</string>
    </dict>
    <key>extensions</key>
    <string>m3u,m3u8</string>
    <key>mimetype</key>
    <string>application/x-mpegurl</string>
    <key>description</key>
    <string><![CDATA[
mux INPUT into an MPEG2 transport stream consisting of H264 video-track and 
AAC audio-track, and pass it to Apple's mediastreamsegmenter
]]></string>
    <key>usage</key>
    <string><![CDATA[
         --video_bitrate     video bitrate in kBit per second
         --video_width       video width in pixel
         --video_height      video height in pixel

         --audio_bitrate     audio bitrate in kBit per second
         --audio_samplerate  audio samplerate in hz as integer
         --audio_channels    number of audio channels,
                             possible values: 1 (mono) or 2 (stereo)

         --base_url          a base url the stream will be published to
         --base_path         a path appended to the base url (and prepended locally)
         --segment_duration  duration of the generated segments in seconds
]]></string>
</dict>
</plist>