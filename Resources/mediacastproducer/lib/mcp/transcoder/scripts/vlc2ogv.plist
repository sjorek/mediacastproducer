<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>commands</key>
    <string>vlc</string>
    <key>options</key>
    <array>
        <string>video_quality</string>
        <string>video_bitrate</string>
        <string>video_width</string>
        <string>video_height</string>
        <string>audio_quality</string>
        <string>audio_bitrate</string>
        <string>audio_channels</string>
        <string>audio_samplerate</string>
    </array>
    <key>arguments</key>
    <array>
        <string>#{vlc}</string>
        <string>-vvvv</string>
        <string>--intf</string>
        <string>dummy</string> 
        <string>--play-and-exit</string>
        <string>#{input}</string>
        <string>--no-sout-transcode-hurry-up</string>
        <string>--no-ffmpeg-hurry-up</string>
        <string>--sout-transcode-high-priority</string>
        <string>--sout-theora-quality=#{video_quality}</string>
        <string>--sout-vorbis-quality=#{audio_quality}</string>
        <string><![CDATA[--sout="#transcode{\
            venc=theora,vcodec=theo,vb=#{video_bitrate},\
            scale=1,deinterlace=0,\
            croptop=0,cropbottom=0,cropleft=0,cropright=0,\
            vfilter=canvas{width=#{video_width},height=#{video_height}},\
            acodec=vorb,ab=#{audio_bitrate.to_i},\
            channels=#{audio_channels},samplerate=#{audio_samplerate},\
            afilter=ugly_resampler}\
            :standard{access=file,mux=ogg,dst='#{output}'}"]]></string>
    </array>
</dict>
</plist>